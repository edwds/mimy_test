# ë°°ë„ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ ê°€ì´ë“œ

## ê°œìš”

í™ˆ í”¼ë“œ ìƒë‹¨ì— í‘œì‹œë˜ëŠ” ë°°ë„ˆë¥¼ ë™ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ê´€ë¦¬ìê°€ ë°°ë„ˆë¥¼ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œí•˜ê³ , ë‹¤ì–‘í•œ ì•¡ì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì£¼ìš” ê¸°ëŠ¥

### 1. ë°°ë„ˆ íƒ€ì…

#### Action Types
- **write**: ê¸€ì“°ê¸° í™”ë©´ìœ¼ë¡œ ì´ë™
- **link**: ì™¸ë¶€ URL ì—´ê¸° (ìƒˆ íƒ­)
- **navigate**: ì•± ë‚´ë¶€ ë¼ìš°íŠ¸ë¡œ ì´ë™

#### Icon Types
- **pen**: íœ ì•„ì´ì½˜
- **user**: ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„ + íœ ì•„ì´ì½˜
- **custom**: ì»¤ìŠ¤í…€ ì´ë¯¸ì§€ URL

### 2. ë°°ë„ˆ ì„¤ì • ì˜µì…˜

- **ì œëª©**: `{{name}}` í…œí”Œë¦¿ìœ¼ë¡œ ì‚¬ìš©ì ì´ë¦„ ë™ì  ì‚½ì… ê°€ëŠ¥
- **ì„¤ëª…**: ë¶€ì œëª© (ì„ íƒì‚¬í•­)
- **ë°°ê²½ ê·¸ë¼ë°ì´ì…˜**: CSS gradient ê°’
- **í‘œì‹œ ìˆœì„œ**: ë‚®ì€ ìˆ«ìê°€ ë¨¼ì € í‘œì‹œ
- **í™œì„±í™” ì—¬ë¶€**: í™œì„±í™”ëœ ë°°ë„ˆë§Œ ë…¸ì¶œ
- **ì‹œì‘ì¼/ì¢…ë£Œì¼**: ê¸°ê°„ ì œí•œ (ì„ íƒì‚¬í•­)

## ì‚¬ìš© ë°©ë²•

### ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼

1. ì•± ì‹¤í–‰ í›„ ë¡œê·¸ì¸
2. `/admin` ê²½ë¡œë¡œ ì´ë™
3. "Banner Management" í´ë¦­
4. `/admin/banners` í˜ì´ì§€ì—ì„œ ë°°ë„ˆ ê´€ë¦¬

### ë°°ë„ˆ ìƒì„±

1. "ìƒˆ ë°°ë„ˆ ì¶”ê°€" ë²„íŠ¼ í´ë¦­
2. í•„ìˆ˜ í•­ëª© ì…ë ¥:
   - ì œëª© (ì˜ˆ: `{{name}}ë‹˜,\nì˜¤ëŠ˜ ë­ ë¨¹ì—ˆì–´ìš”?`)
   - ì•¡ì…˜ íƒ€ì… ì„ íƒ
3. ì„ íƒ í•­ëª© ì…ë ¥:
   - ì„¤ëª…
   - ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ (í”„ë¦¬ì…‹ ë˜ëŠ” ì§ì ‘ ì…ë ¥)
   - ì•„ì´ì½˜ íƒ€ì…
   - ì‹œì‘ì¼/ì¢…ë£Œì¼
4. ë¯¸ë¦¬ë³´ê¸° í™•ì¸
5. "ì €ì¥" í´ë¦­

### ë°°ë„ˆ ìˆ˜ì •

1. ë°°ë„ˆ ëª©ë¡ì—ì„œ ì—°í•„ ì•„ì´ì½˜ í´ë¦­
2. ìˆ˜ì •í•  ë‚´ìš© ë³€ê²½
3. "ì €ì¥" í´ë¦­

### ë°°ë„ˆ í™œì„±í™”/ë¹„í™œì„±í™”

- ë°°ë„ˆ ëª©ë¡ì—ì„œ ëˆˆ ì•„ì´ì½˜ í´ë¦­
- ë¹„í™œì„±í™”ëœ ë°°ë„ˆëŠ” ì•±ì— í‘œì‹œë˜ì§€ ì•ŠìŒ

### ë°°ë„ˆ ì‚­ì œ

1. ë°°ë„ˆ ëª©ë¡ì—ì„œ íœ´ì§€í†µ ì•„ì´ì½˜ í´ë¦­
2. í™•ì¸ ëŒ€í™”ìƒìì—ì„œ "í™•ì¸" í´ë¦­

## API ì—”ë“œí¬ì¸íŠ¸

### ê³µê°œ API

```bash
# í™œì„±í™”ëœ ë°°ë„ˆ ì¡°íšŒ (ë‚ ì§œ í•„í„° ì ìš©)
GET /api/banners
```

### ê´€ë¦¬ì API

```bash
# ëª¨ë“  ë°°ë„ˆ ì¡°íšŒ
GET /api/banners/all

# ë°°ë„ˆ ìƒì„±
POST /api/banners
Content-Type: application/json

{
  "title": "{{name}}ë‹˜,\nì˜¤ëŠ˜ ë­ ë¨¹ì—ˆì–´ìš”?",
  "description": "ê°„ë‹¨í•œ ì‚¬ì§„ í•œ ì¥ìœ¼ë¡œ\në‚´ ë¯¸ì‹ ì·¨í–¥ì„ ì™„ì„±í•˜ì„¸ìš”",
  "action_type": "write",
  "action_value": null,
  "background_gradient": "linear-gradient(135deg, #FDFBF7 0%, #F5F3FF 100%)",
  "icon_type": "pen",
  "icon_url": null,
  "is_active": true,
  "display_order": 0,
  "start_date": null,
  "end_date": null
}

# ë°°ë„ˆ ìˆ˜ì •
PATCH /api/banners/:id
Content-Type: application/json

{
  "title": "ìƒˆë¡œìš´ ì œëª©",
  "is_active": false
}

# ë°°ë„ˆ ì‚­ì œ
DELETE /api/banners/:id
```

## ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### banners í…Œì´ë¸”

```sql
CREATE TABLE banners (
    id serial PRIMARY KEY,
    title text NOT NULL,
    description text,
    action_type varchar(20) NOT NULL, -- 'write', 'link', 'navigate'
    action_value text, -- URL or route
    background_gradient text DEFAULT 'linear-gradient(135deg, #FDFBF7 0%, #F5F3FF 100%)',
    icon_type varchar(20), -- 'pen', 'user', 'custom'
    icon_url text, -- Custom icon URL
    is_active boolean DEFAULT true,
    display_order integer DEFAULT 0,
    start_date timestamp,
    end_date timestamp,
    created_at timestamp DEFAULT now(),
    updated_at timestamp DEFAULT now()
);

CREATE INDEX idx_banners_active_order ON banners (is_active, display_order);
```

## ë°°ë„ˆ í‘œì‹œ ë¡œì§

### HomeTab.tsx

1. ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ `/api/banners` í˜¸ì¶œ
2. í™œì„±í™”ëœ ë°°ë„ˆë“¤ì„ `display_order` ìˆœìœ¼ë¡œ ë Œë”ë§
3. ì œëª©ì˜ `{{name}}` í…œí”Œë¦¿ì„ í˜„ì¬ ì‚¬ìš©ì ë‹‰ë„¤ì„ìœ¼ë¡œ ì¹˜í™˜
4. `action_type`ì— ë”°ë¼ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬:
   - `write`: `onWrite()` í˜¸ì¶œ
   - `link`: `window.open(action_value, '_blank')`
   - `navigate`: `navigate(action_value)`

### í•„í„°ë§ ë¡œì§ (ì„œë²„)

```typescript
// í˜„ì¬ ë‚ ì§œ/ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ìë™ í•„í„°ë§
const now = new Date();

WHERE
  is_active = true
  AND (start_date IS NULL OR start_date <= now)
  AND (end_date IS NULL OR end_date >= now)
ORDER BY
  display_order ASC,
  created_at DESC
```

## ì˜ˆì œ ë°°ë„ˆ

### 1. ê¸°ë³¸ ê¸€ì“°ê¸° ë°°ë„ˆ

```json
{
  "title": "{{name}}ë‹˜,\nì˜¤ëŠ˜ ë­ ë¨¹ì—ˆì–´ìš”?",
  "description": "ê°„ë‹¨í•œ ì‚¬ì§„ í•œ ì¥ìœ¼ë¡œ\në‚´ ë¯¸ì‹ ì·¨í–¥ì„ ì™„ì„±í•˜ì„¸ìš”",
  "action_type": "write",
  "background_gradient": "linear-gradient(135deg, #FDFBF7 0%, #F5F3FF 100%)",
  "icon_type": "pen",
  "display_order": 0
}
```

### 2. ì´ë²¤íŠ¸ ë°°ë„ˆ (ê¸°ê°„ ì œí•œ)

```json
{
  "title": "ğŸ‰ íŠ¹ë³„ ì´ë²¤íŠ¸\nì§€ê¸ˆ ì°¸ì—¬í•˜ì„¸ìš”!",
  "description": "ê¸°ê°„ í•œì • ì´ë²¤íŠ¸ ì§„í–‰ ì¤‘",
  "action_type": "link",
  "action_value": "https://example.com/event",
  "background_gradient": "linear-gradient(135deg, #FFF5E1 0%, #FFE4E1 100%)",
  "icon_type": "custom",
  "icon_url": "https://example.com/event-icon.png",
  "start_date": "2026-02-01T00:00:00Z",
  "end_date": "2026-02-28T23:59:59Z",
  "display_order": 0
}
```

### 3. ë‚´ë¶€ í˜ì´ì§€ ì´ë™ ë°°ë„ˆ

```json
{
  "title": "ë¯¸ì‹ ì„±í–¥ í…ŒìŠ¤íŠ¸\në‹¤ì‹œ í•˜ê¸°",
  "description": "ë‚˜ì˜ ë¯¸ì‹ ì·¨í–¥ì„ ë‹¤ì‹œ í™•ì¸í•´ë³´ì„¸ìš”",
  "action_type": "navigate",
  "action_value": "/quiz",
  "background_gradient": "linear-gradient(135deg, #E6F3FF 0%, #F0F8FF 100%)",
  "icon_type": "custom",
  "icon_url": "https://example.com/quiz-icon.png",
  "display_order": 1
}
```

## í”„ë¦¬ì…‹ ê·¸ë¼ë°ì´ì…˜

```css
/* ê¸°ë³¸ (ë¼ì´íŠ¸ í¼í”Œ) */
linear-gradient(135deg, #FDFBF7 0%, #F5F3FF 100%)

/* ì˜¤ë Œì§€ ì„ ì…‹ */
linear-gradient(135deg, #FFF5E1 0%, #FFE4E1 100%)

/* ë¯¼íŠ¸ í”„ë ˆì‹œ */
linear-gradient(135deg, #E0F7F7 0%, #E8F8F5 100%)

/* í•‘í¬ ë¸”ëŸ¬ì‹œ */
linear-gradient(135deg, #FFF0F5 0%, #FFE4F3 100%)

/* ë¸”ë£¨ ìŠ¤ì¹´ì´ */
linear-gradient(135deg, #E6F3FF 0%, #F0F8FF 100%)
```

## íŒŒì¼ êµ¬ì¡°

```
mimy_test/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ schema.ts                    # banners í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ banners.ts                   # ë°°ë„ˆ API ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ create-banners-table.ts      # í…Œì´ë¸” ìƒì„± ìŠ¤í¬ë¦½íŠ¸
â”‚   â”‚   â””â”€â”€ seed-default-banner.ts       # ê¸°ë³¸ ë°°ë„ˆ ìƒì„±
â”‚   â””â”€â”€ index.ts                         # ë¼ìš°íŠ¸ ë“±ë¡
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminScreen.tsx          # ê´€ë¦¬ì ë©”ì¸
â”‚   â”‚   â”‚   â””â”€â”€ BannerAdminScreen.tsx    # ë°°ë„ˆ ê´€ë¦¬ UI
â”‚   â”‚   â””â”€â”€ main/
â”‚   â”‚       â””â”€â”€ HomeTab.tsx              # ë°°ë„ˆ í‘œì‹œ (ìˆ˜ì •ë¨)
â”‚   â””â”€â”€ App.tsx                          # ë¼ìš°íŠ¸ ì¶”ê°€
â”‚
â””â”€â”€ drizzle/
    â””â”€â”€ 0011_optimal_caretaker.sql       # ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼
```

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë°°ë„ˆê°€ í‘œì‹œë˜ì§€ ì•Šì•„ìš”

1. ë°°ë„ˆê°€ í™œì„±í™” ìƒíƒœì¸ì§€ í™•ì¸
2. ì‹œì‘ì¼/ì¢…ë£Œì¼ ì„¤ì • í™•ì¸
3. ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ ë„¤íŠ¸ì›Œí¬ íƒ­ í™•ì¸
4. `/api/banners` ì‘ë‹µ í™•ì¸

### ë°°ë„ˆ í´ë¦­ì´ ì‘ë™í•˜ì§€ ì•Šì•„ìš”

1. `action_type` ê°’ í™•ì¸
2. `link` íƒ€ì…: `action_value`ì— ìœ íš¨í•œ URL ì…ë ¥ í™•ì¸
3. `navigate` íƒ€ì…: `action_value`ì— ìœ íš¨í•œ ë¼ìš°íŠ¸ í™•ì¸
4. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸

### ë°°ë„ˆ ìˆœì„œê°€ ì´ìƒí•´ìš”

- `display_order` ê°’ì„ ìˆ˜ì •í•˜ì„¸ìš”
- ë‚®ì€ ìˆ«ìê°€ ë¨¼ì € í‘œì‹œë©ë‹ˆë‹¤
- ê°™ì€ `display_order`ì¸ ê²½ìš° ìµœì‹  ìƒì„± ìˆœ

## ë§ˆì´ê·¸ë ˆì´ì…˜

### ê¸°ì¡´ ë°ì´í„°ë² ì´ìŠ¤ì— ë°°ë„ˆ í…Œì´ë¸” ì¶”ê°€

```bash
# ë°©ë²• 1: Drizzle ë§ˆì´ê·¸ë ˆì´ì…˜ (ê¶Œì¥)
npm run db:generate
npm run db:migrate

# ë°©ë²• 2: ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
npx tsx server/scripts/create-banners-table.ts

# ê¸°ë³¸ ë°°ë„ˆ ë°ì´í„° ìƒì„±
npx tsx server/scripts/seed-default-banner.ts
```

## í–¥í›„ ê°œì„  ì‚¬í•­

- [ ] ë“œë˜ê·¸&ë“œë¡­ìœ¼ë¡œ ë°°ë„ˆ ìˆœì„œ ë³€ê²½
- [ ] ë°°ë„ˆ í´ë¦­ í†µê³„ ì¶”ì 
- [ ] A/B í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥
- [ ] ì‚¬ìš©ì ì„¸ê·¸ë¨¼íŠ¸ë³„ ë°°ë„ˆ íƒ€ê²ŸíŒ…
- [ ] ë°°ë„ˆ í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬
- [ ] ë°°ë„ˆ ë³µì œ ê¸°ëŠ¥
- [ ] ë°°ë„ˆ ë¯¸ë¦¬ë³´ê¸° ëª¨ë“œ

---

**ì‘ì„±ì¼**: 2026-02-04
**ì‘ì„±ì**: Claude Code (Sonnet 4.5)
