import { db } from '../db/index.js';
import { terms } from '../db/schema.js';
import { eq } from 'drizzle-orm';

const termsData = [
    {
        code: 'service',
        title: '서비스 이용약관',
        content: `# 서비스 이용약관

## 제1조 (목적)
이 약관은 mimy(이하 "회사")가 제공하는 서비스의 이용조건 및 절차, 회사와 이용자의 권리, 의무, 책임사항과 기타 필요한 사항을 규정함을 목적으로 합니다.

## 제2조 (정의)
1. "서비스"란 회사가 제공하는 맛집 추천, 리뷰 작성, 소셜 기능 등 일체의 서비스를 의미합니다.
2. "이용자"란 본 약관에 따라 회사가 제공하는 서비스를 이용하는 회원 및 비회원을 말합니다.
3. "회원"이란 회사와 서비스 이용계약을 체결하고 이용자 아이디를 부여받은 자를 말합니다.

## 제3조 (약관의 효력 및 변경)
1. 본 약관은 서비스를 이용하고자 하는 모든 이용자에게 적용됩니다.
2. 회사는 필요한 경우 관련 법령을 위배하지 않는 범위 내에서 본 약관을 변경할 수 있습니다.
3. 변경된 약관은 서비스 내 공지사항을 통해 공지하며, 공지 후 7일이 경과한 시점부터 효력이 발생합니다.

## 제4조 (서비스의 제공)
1. 회사는 다음과 같은 서비스를 제공합니다:
   - 개인화된 맛집 추천 서비스
   - 맛집 리뷰 작성 및 공유 서비스
   - 미식 성향 분석 서비스
   - 소셜 네트워킹 서비스 (팔로우, 좋아요, 댓글 등)
   - 기타 회사가 정하는 서비스

## 제5조 (회원가입)
1. 이용자는 회사가 정한 가입 양식에 따라 회원정보를 기입한 후 본 약관에 동의한다는 의사표시를 함으로써 회원가입을 신청합니다.
2. 회사는 제1항과 같이 회원으로 가입할 것을 신청한 이용자 중 다음 각 호에 해당하지 않는 한 회원으로 등록합니다.

## 제6조 (회원 탈퇴 및 자격 상실)
1. 회원은 언제든지 회사에 탈퇴를 요청할 수 있으며, 회사는 즉시 회원탈퇴를 처리합니다.
2. 회원이 다음 각 호의 사유에 해당하는 경우, 회사는 회원자격을 제한 또는 정지시킬 수 있습니다.

## 제7조 (이용자의 의무)
1. 이용자는 다음 행위를 하여서는 안 됩니다:
   - 신청 또는 변경 시 허위내용의 등록
   - 타인의 정보 도용
   - 회사가 게시한 정보의 변경
   - 회사가 정한 정보 이외의 정보 등의 송신 또는 게시
   - 회사와 기타 제3자의 저작권 등 지적재산권에 대한 침해
   - 회사 및 기타 제3자의 명예를 손상시키거나 업무를 방해하는 행위

## 제8조 (저작권의 귀속)
1. 서비스에 게시된 콘텐츠의 저작권은 해당 콘텐츠의 작성자에게 귀속됩니다.
2. 회원이 서비스 내에 게시한 콘텐츠의 저작권은 해당 회원에게 귀속됩니다.

## 제9조 (면책조항)
1. 회사는 천재지변 또는 이에 준하는 불가항력으로 인하여 서비스를 제공할 수 없는 경우에는 서비스 제공에 관한 책임이 면제됩니다.
2. 회사는 이용자의 귀책사유로 인한 서비스 이용의 장애에 대하여는 책임을 지지 않습니다.

## 제10조 (분쟁해결)
1. 회사와 이용자 간에 발생한 전자상거래 분쟁에 관한 소송은 민사소송법상의 관할법원에 제기합니다.

**시행일: 2026년 2월 10일**`,
        summary: '서비스 이용에 관한 기본 약관입니다.',
        is_required: true,
        version: '1.0',
        country_code: 'ALL',
        effective_date: '2026-02-10',
    },
    {
        code: 'privacy',
        title: '개인정보 처리방침',
        content: `# 개인정보 처리방침

mimy(이하 "회사")는 이용자의 개인정보를 중요시하며, 「개인정보 보호법」을 준수하고 있습니다.

## 1. 개인정보의 수집 및 이용 목적

회사는 다음의 목적을 위하여 개인정보를 처리합니다:

### 1.1 회원 가입 및 관리
- 회원제 서비스 이용에 따른 본인확인
- 회원자격 유지·관리
- 서비스 부정이용 방지

### 1.2 서비스 제공
- 개인화된 맛집 추천
- 콘텐츠 제공
- 맞춤 서비스 제공

### 1.3 마케팅 및 광고 활용 (선택 동의 시)
- 이벤트 및 광고성 정보 제공
- 서비스 이용 통계 분석

## 2. 수집하는 개인정보 항목

### 2.1 필수 수집 항목
- 이름, 휴대폰 번호, 생년월일, 이메일 주소
- 소셜 로그인 시: 소셜 계정 식별자

### 2.2 선택 수집 항목
- 프로필 사진, 닉네임, 자기소개
- 위치 정보 (맛집 추천 서비스 이용 시)

### 2.3 서비스 이용 과정에서 자동 수집되는 항목
- 서비스 이용 기록, 접속 로그, 쿠키
- 기기 정보 (기기 식별자, OS 종류 및 버전)

## 3. 개인정보의 보유 및 이용 기간

회사는 법령에 따른 개인정보 보유·이용 기간 또는 정보주체로부터 개인정보를 수집 시에 동의받은 개인정보 보유·이용 기간 내에서 개인정보를 처리·보유합니다.

- **회원 정보**: 회원 탈퇴 시까지
- **서비스 이용 기록**: 3년

## 4. 개인정보의 제3자 제공

회사는 원칙적으로 이용자의 개인정보를 외부에 제공하지 않습니다. 다만, 아래의 경우에는 예외로 합니다:
- 이용자가 사전에 동의한 경우
- 법령의 규정에 의거하거나, 수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가 있는 경우

## 5. 개인정보의 파기

회사는 개인정보 보유 기간의 경과, 처리목적 달성 등 개인정보가 불필요하게 되었을 때에는 지체없이 해당 개인정보를 파기합니다.

## 6. 이용자의 권리

이용자는 언제든지 다음의 권리를 행사할 수 있습니다:
- 개인정보 열람 요구
- 오류 등이 있을 경우 정정 요구
- 삭제 요구
- 처리정지 요구

## 7. 개인정보 보호책임자

- **담당자**: 개인정보 보호팀
- **이메일**: privacy@mimy.app

## 8. 개인정보 처리방침 변경

이 개인정보 처리방침은 시행일로부터 적용되며, 법령 및 방침에 따른 변경내용의 추가, 삭제 및 정정이 있는 경우에는 변경사항의 시행 7일 전부터 공지사항을 통하여 고지할 것입니다.

**시행일: 2026년 2월 10일**`,
        summary: '개인정보 수집 및 이용에 관한 방침입니다.',
        is_required: true,
        version: '1.0',
        country_code: 'ALL',
        effective_date: '2026-02-10',
    },
    {
        code: 'marketing',
        title: '마케팅 정보 수신 동의',
        content: `# 마케팅 정보 수신 동의

## 1. 목적
mimy에서 제공하는 이벤트, 혜택, 신규 서비스 등의 정보를 받아보실 수 있습니다.

## 2. 수신 정보 내용
- 신규 서비스 및 기능 안내
- 이벤트 및 프로모션 정보
- 맞춤형 맛집 추천 알림
- 서비스 관련 유용한 팁

## 3. 수신 방법
- 푸시 알림
- 이메일
- SMS/LMS

## 4. 수신 동의 철회
마케팅 정보 수신에 동의하신 후에도 언제든지 설정에서 수신 동의를 철회하실 수 있습니다.

**본 동의는 선택 사항이며, 동의하지 않으셔도 서비스 이용에 제한이 없습니다.**

**시행일: 2026년 2월 10일**`,
        summary: '이벤트 및 혜택 알림 수신에 관한 동의입니다.',
        is_required: false,
        version: '1.0',
        country_code: 'ALL',
        effective_date: '2026-02-10',
    },
];

async function seedTerms() {
    console.log('Starting terms seeding...');

    for (const termData of termsData) {
        try {
            // Check if term with same code already exists
            const existing = await db
                .select()
                .from(terms)
                .where(eq(terms.code, termData.code))
                .limit(1);

            if (existing.length > 0) {
                console.log(`Term "${termData.code}" already exists, skipping...`);
                continue;
            }

            await db.insert(terms).values(termData);
            console.log(`Inserted term: ${termData.code}`);
        } catch (error) {
            console.error(`Error inserting term ${termData.code}:`, error);
        }
    }

    console.log('Terms seeding completed!');
    process.exit(0);
}

seedTerms();
